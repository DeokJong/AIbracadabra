<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.model.dao.PlanDao">

  <resultMap id="planMap" type="com.ssafy.model.dto.domain.Plan">
    <id     property="pno"           column="pno"/>
    <result property="title"         column="title"/>
    <result property="days"          column="days"/>
    <result property="scheduleCount" column="schedule_count"/>
    <result property="mno"           column="mno"/>
  </resultMap>

  <insert id="add" 
          parameterType="com.ssafy.model.dto.domain.Plan"
          useGeneratedKeys="true" keyProperty="pno" keyColumn="pno">
    INSERT INTO plans (title, days, mno)
    VALUES (#{title}, #{days}, #{mno})
  </insert>

  <select id="get" 
          parameterType="int" 
          resultMap="planMap">
    SELECT pno, title, days, schedule_count, mno
      FROM plans
     WHERE pno = #{pno}
  </select>

  <select id="getByMember" 
          parameterType="int" 
          resultMap="planMap">
    SELECT pno, title, days, schedule_count, mno
      FROM plans
     WHERE mno = #{mno}
  </select>

  <update id="set" parameterType="com.ssafy.model.dto.domain.Plan">
    UPDATE plans
       SET title          = #{title},
           days           = #{days},
           schedule_count = #{scheduleCount}
     WHERE pno = #{pno}
  </update>

  <delete id="remove" parameterType="int">
    DELETE FROM plans
     WHERE pno = #{pno}
  </delete>

  <delete id="removeAll" parameterType="int">
    DELETE FROM plans
     WHERE mno = #{mno}
  </delete>

</mapper>
