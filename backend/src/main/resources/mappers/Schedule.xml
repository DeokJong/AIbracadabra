<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.model.dao.ScheduleDao">

  <resultMap id="scheduleMap" type="com.ssafy.model.dto.domain.Schedule">
    <id     property="sno"   column="sno"/>
    <result property="order" column="order"/>
    <result property="pno"   column="pno"/>
    <result property="ano"   column="ano"/>
  </resultMap>

  <insert id="add" 
          parameterType="com.ssafy.model.dto.domain.Schedule"
          useGeneratedKeys="true" keyProperty="sno" keyColumn="sno">
    INSERT INTO schedules (`order`, pno, ano)
    VALUES (#{order}, #{pno}, #{ano})
  </insert>

  <select id="get" 
          parameterType="int" 
          resultMap="scheduleMap">
    SELECT sno, `order`, pno, ano
      FROM schedules
     WHERE sno = #{sno}
  </select>

  <select id="getByPlan" 
          parameterType="int" 
          resultMap="scheduleMap">
    SELECT sno, `order`, pno, ano
      FROM schedules
     WHERE pno = #{pno}
  </select>

  <update id="set" parameterType="com.ssafy.model.dto.domain.Schedule">
    UPDATE schedules
       SET `order` = #{order},
           pno     = #{pno},
           ano     = #{ano}
     WHERE sno = #{sno}
  </update>

  <delete id="remove" parameterType="int">
    DELETE FROM schedules
     WHERE sno = #{sno}
  </delete>

</mapper>
